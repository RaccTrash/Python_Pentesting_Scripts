#import necessary modules
import getopt
import socket
import sys
#help
def usage():
	print("\033[1;31;29m --target, -t	-specifies target  \n")
	print ('')
	print ("--port, -p	-specifies max port number to scan")
try:
    opts, args = getopt.getopt(sys.argv[1:], 't:p:w:h', ['target=', 'port=','web=', 'help'])
except getopt.GetoptError:
    usage()
    sys.exit(2)

for opt, arg in opts:
    if opt in ('-h', '--help'):
        usage()
        sys.exit(2)
    elif opt in ('-t', '--target'):
	targethost = arg
    elif opt in ('-p', '--port'):
	targetport = int(arg)
    elif opt in ('-w', '--webaddr'):
	webyn = arg
    else:
        usage()
        sys.exit(2)

print("\033[1;31;29m\n")
tip = socket.gethostbyname(targethost)

if webyn == '':
	print ("[+]IP from "+targethost+" is "+tip)
def connScan(maxport):
	try:
		s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
		s.connect((tip, maxport))
		print ("[+]"+str(tip)+":"+str(maxport)+" is open")
		s.send("\x41")
		print ("[+]"+str(s.recv(100)))
		s.close
	except:
		return
x = 0
y = 0
ans = 'y'
while x <= targetport:
	x+= 1
	try:
		connScan(x)
	except NameError:
		print ("Target port of target IP is not defined.")
	
